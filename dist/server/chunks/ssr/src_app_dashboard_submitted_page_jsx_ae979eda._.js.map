{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Stevenix/Documents/Codes%20for%20project/CPE-17-3096%20project/idrugdes-app/src/app/dashboard/submitted/page.jsx"],"sourcesContent":["'use client';\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nconst statusColor = {\r\n  approved: \"success\",\r\n  pending: \"warning\",\r\n  rejected: \"error\",\r\n};\r\n\r\nconst statusBadgeStyles = {\r\n  success: \"bg-green-100 text-green-800\",\r\n  warning: \"bg-yellow-100 text-yellow-800\",\r\n  error: \"bg-red-100 text-red-800\",\r\n};\r\n\r\nconst fetchPrescriptions = async () => {\r\n  const response = await fetch(\"/api/prescriptions\");\r\n  if (!response.ok) throw new Error(\"Failed to fetch prescriptions\");\r\n  return response.json();\r\n};\r\n\r\nconst Prescriptions = () => {\r\n  const [prescriptions, setPrescriptions] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filterStatus, setFilterStatus] = useState(\"all\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [selectedPrescription, setSelectedPrescription] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function loadPrescriptions() {\r\n      setLoading(true);\r\n      try {\r\n        const data = await fetchPrescriptions();\r\n        setPrescriptions(data);\r\n      } catch (error) {\r\n        // Handle error\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    loadPrescriptions();\r\n  }, []);\r\n\r\n  const handleRowClick = (prescription) => {\r\n    setSelectedPrescription(prescription);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n    setSelectedPrescription(null);\r\n  };\r\n\r\n  const filteredPrescriptions = prescriptions.filter((prescription) => {\r\n    const matchesSearch =\r\n      prescription.patientName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      prescription.doctorName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      prescription.medication.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesStatus =\r\n      filterStatus === \"all\" || prescription.status === filterStatus;\r\n\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  return (\r\n    <section className=\"w-full min-h-screen bg-gradient-to-bl from-slate-50 to-indigo-100 p-6\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"bg-white rounded-2xl shadow-2xl p-8\">\r\n          <div className=\"flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4\">\r\n            <h1 className=\"text-4xl font-extrabold text-indigo-900 tracking-tight\">My Prescriptions</h1>\r\n            <div className=\"flex flex-col md:flex-row gap-3 md:gap-4\">\r\n              <div className=\"relative\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Search by patient, doctor, or medication...\"\r\n                  className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-50 text-gray-900 w-64 shadow-sm\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                />\r\n                <svg\r\n                  className=\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <select\r\n                className=\"border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-50 text-gray-900 shadow-sm\"\r\n                value={filterStatus}\r\n                onChange={(e) => setFilterStatus(e.target.value)}\r\n              >\r\n                <option value=\"all\">All Status</option>\r\n                <option value=\"pending\">Pending</option>\r\n                <option value=\"approved\">Approved</option>\r\n                <option value=\"rejected\">Rejected</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"overflow-x-auto rounded-xl border border-gray-200 shadow-sm\">\r\n            {loading ? (\r\n              <div className=\"text-center py-16 text-lg text-gray-500\">Loading prescriptions...</div>\r\n            ) : filteredPrescriptions.length === 0 ? (\r\n              <div className=\"text-center py-16 text-gray-400\">No prescriptions found.</div>\r\n            ) : (\r\n              <table className=\"w-full table-auto text-sm\">\r\n                <thead>\r\n                  <tr className=\"bg-gradient-to-r from-indigo-600 to-purple-500 text-white\">\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">ID</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Patient</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Medication</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Phone</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Doctor</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Date</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Status</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold\">Decline Reason</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-100\">\r\n                  {filteredPrescriptions.map((prescription) => (\r\n                    <tr key={prescription.id} className=\"hover:bg-indigo-50 cursor-pointer transition\" onClick={() => handleRowClick(prescription)}>\r\n                      <td className=\"px-4 py-3 font-medium text-gray-900\">{prescription.id}</td>\r\n                      <td className=\"px-4 py-3\">{prescription.patientName}</td>\r\n                      <td className=\"px-4 py-3\">{prescription.medication}</td>\r\n                      <td className=\"px-4 py-3\">{prescription.phoneNumber}</td>\r\n                      <td className=\"px-4 py-3\">{prescription.doctorName}</td>\r\n                      <td className=\"px-4 py-3\">{typeof prescription.createdAt === 'string' ? prescription.createdAt.slice(0, 10) : new Date(prescription.createdAt).toLocaleDateString()}</td>\r\n                      <td className=\"px-4 py-3\">\r\n                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold shadow-sm ${statusBadgeStyles[statusColor[prescription.status]]} capitalize`}>\r\n                          {prescription.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-4 py-3 text-gray-500\">{prescription.declineReason || '-'}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {modalOpen && selectedPrescription && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 animate-fade-in\">\r\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 relative\">\r\n            <button onClick={closeModal} className=\"absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold focus:outline-none\">&times;</button>\r\n            <h2 className=\"text-2xl font-bold mb-4 text-indigo-800\">Prescription Details</h2>\r\n            <div className=\"space-y-3\">\r\n              <div><span className=\"font-semibold text-gray-700\">Patient:</span> {selectedPrescription.patientName}</div>\r\n              <div><span className=\"font-semibold text-gray-700\">Doctor:</span> {selectedPrescription.doctorName}</div>\r\n              <div><span className=\"font-semibold text-gray-700\">Medication:</span> {selectedPrescription.medication}</div>\r\n              <div><span className=\"font-semibold text-gray-700\">Phone:</span> {selectedPrescription.phoneNumber}</div>\r\n              <div><span className=\"font-semibold text-gray-700\">Date:</span> {typeof selectedPrescription.createdAt === 'string' ? selectedPrescription.createdAt.slice(0, 10) : new Date(selectedPrescription.createdAt).toLocaleDateString()}</div>\r\n              <div><span className=\"font-semibold text-gray-700\">Status:</span> <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold shadow-sm ${statusBadgeStyles[statusColor[selectedPrescription.status]]} capitalize`}>{selectedPrescription.status}</span></div>\r\n              <div><span className=\"font-semibold text-gray-700\">Decline Reason:</span> {selectedPrescription.declineReason || '-'}</div>\r\n              {selectedPrescription.prescriptionFilePath && (\r\n                <div className=\"mt-4\">\r\n                  <span className=\"font-semibold text-gray-700\">Prescription Image:</span>\r\n                  <div className=\"mt-2\">\r\n                    <img src={selectedPrescription.prescriptionFilePath} alt=\"Prescription\" className=\"max-w-full max-h-60 rounded shadow\" />\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"mt-8 flex justify-end\">\r\n              <button onClick={closeModal} className=\"px-6 py-2 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400\">Close</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Prescriptions;\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}